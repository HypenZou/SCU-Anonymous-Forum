webpackJsonp([1],{"81gF":function(t,a,s){t.exports=s.p+"static/img/top_6.7cc069c.png"},CHsn:function(t,a,s){t.exports=s.p+"static/img/top_10.5cf26e9.png"},Dxyt:function(t,a,s){t.exports=s.p+"static/img/top_7.5060218.png"},EH4g:function(t,a,s){t.exports=s.p+"static/img/top_2.410ed52.png"},KVIO:function(t,a,s){t.exports=s.p+"static/img/top_9.354a1df.png"},Kzu5:function(t,a,s){t.exports=s.p+"static/img/top_8.b8ca45a.png"},T260:function(t,a,s){t.exports=s.p+"static/img/top_5.6add3b3.png"},WYQs:function(t,a){},WfyG:function(t,a,s){var e={"./top_1.png":"lC8E","./top_10.png":"CHsn","./top_2.png":"EH4g","./top_3.png":"y1fV","./top_4.png":"fHNP","./top_5.png":"T260","./top_6.png":"81gF","./top_7.png":"Dxyt","./top_8.png":"Kzu5","./top_9.png":"KVIO"};function i(t){return s(o(t))}function o(t){var a=e[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}i.keys=function(){return Object.keys(e)},i.resolve=o,t.exports=i,i.id="WfyG"},WwBW:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("3cXf"),i=s.n(e),o=s("RzMJ"),n=function(t,a){try{if(localStorage.getItem("shieldPostId"))a=JSON.parse(localStorage.getItem("shieldPostId"))}catch(t){a=void 0}return a?(t.forEach(function(t){a.includes(t.id)&&(t.filterLevel=2)}),t):t},l={name:"hot",data:function(){return{tab:0,map:o.a,HotPostRecently:[],digestPosts:[],snackbar:{show:!1,message:"再点一次退出",color:"grey-darken3"},bottomDrawer:{showBottomDrawer:!1,chooseIndex:0,dislike_num:0,listName:"HotPostRecently"},hotExplainDialog:!1,hotExplainContent:sessionStorage.getItem("hotExplainContent")||" <span>『火锅底料』社区热度计算公式:</span> <br /> <span>热度 = 浏览量 × 1 + 评论数 × 2 + 点赞数 × 3 + 收藏数 × 4 - 举报数 × 5</span> <br /> <span>热度排名由上往下取前十</span> <span></span>"}},created:function(){var t=this;t.$request("get","/forum/getHotPostRecently",{},{}).then(function(a){n(a.data),t.HotPostRecently=a.data}).catch(function(a){t.showSnackbar(a)}),setTimeout(function(){t.$request("get","/forum/getDigestPosts",{},{}).then(function(a){n(a.data),t.digestPosts=a.data}).catch(function(a){t.showSnackbar(a)})},500)},methods:{timeFormat:function(t){var a=Math.floor(((new Date).getTime()-new Date(t).getTime())/1e3),s=Math.floor(a/3600/24),e=Math.floor(a/3600)%24,i=Math.floor(a/60)%60,o=Math.floor(a%60),n="";if(o>0&&0==i&&0==e&&0==s)n=o+"秒前";else if(i>0&&0==e&&0==s)n=i+"分钟前";else{if(!(e>0&&0==s))return new Date(new Date(t).getTime()+288e5).toJSON().substr(0,16).replace("T"," ");n=e+"小时前"}return n},likeOrDislike:function(t,a,s){var e=this;e.$request("post","/forum/forumLikeOrDislike",{},{postId:Number(e[s][t].id),value:a}).then(function(i){e.showSnackbar(i,"ok"),1==a?e[s][t].like_num++:-1==a&&(e.bottomDrawer.dislike_num++,e[s][t].dislike_num++)}).catch(function(t){console.log(t),e.showSnackbar(t)})},addCollect:function(t,a){var s=this;s.$request("post","/forum/addCollect",{},{postId:Number(s[a][t].id)}).then(function(t){s.showSnackbar(t,"ok")}).catch(function(t){s.showSnackbar(t)})},shieldPost:function(t,a){var s=this[a][t].id;try{if(localStorage.getItem("shieldPostId")){var e=JSON.parse(localStorage.getItem("shieldPostId"));if(e.includes(s))return void this.showSnackbar("已经屏蔽过了");e.push(s),localStorage.setItem("shieldPostId",i()(e)),this.showSnackbar("屏蔽成功!","ok"),this[a].splice(t,1)}else{var o=[];o.push(s),localStorage.setItem("shieldPostId",i()(o)),this.showSnackbar("屏蔽成功!","ok"),this[a].splice(t,1)}}catch(t){localStorage.removeItem("shieldPostId"),this.showSnackbar("屏蔽失败!")}},showBottomDrawer:function(t,a){this.bottomDrawer.showBottomDrawer=!0,this.bottomDrawer.chooseIndex=t,this.bottomDrawer.dislike_num=this[a][t].dislike_num,this.bottomDrawer.listName=a}},watch:{hotExplainDialog:function(t){this.$store.change_dialog(t,"hotExplainDialog")},"$store.state.dialog":function(t){"hotExplainDialog"==this.$store.state.dialogName&&(this.hotExplainDialog=t)}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main_container"},[e("v-tabs",{attrs:{centered:"",grow:""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab",[t._v("本月热门")]),t._v(" "),e("v-tab",[t._v("加精帖子")])],1),t._v(" "),e("v-tabs-items",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",[e("div",{staticClass:"d-flex flex-column align-center item_container"},[e("v-icon",{staticClass:"filter"},[t._v("mdi-fire")])],1),t._v(" "),t._l(t.HotPostRecently,function(a,i){return 2!=a.filterLevel?e("div",{key:i,staticClass:"d-flex item_container",on:{click:function(s){t.$router.push({path:"/postDetail",query:{id:Number(a.id)}})}}},[e("v-card",{staticClass:"rounded-0 mb-3 d-flex flex-column justify-start align-center",attrs:{width:"20%",flat:""}},[e("v-avatar",{staticClass:"ml-2 mt-2",attrs:{size:"58px"}},[e("v-img",{attrs:{src:s("WfyG")("./top_"+(i+1)+".png"),width:"58px",contain:""}})],1),t._v(" "),e("div",{staticClass:"d-flex justify-center flex-column"},[e("span",{staticClass:"text_black text_thick text_small-- ml-1 mt-2"},[t._v("热度:")]),t._v(" "),e("span",{staticClass:"text_grey text_small--- ml-2"},[t._v(t._s(a.hot_num))]),t._v(" "),e("v-btn",{staticClass:"ml-1",attrs:{small:"",icon:""},on:{click:function(a){a.stopPropagation(),t.hotExplainDialog=!0}}},[e("v-icon",{staticClass:"mt-n1",attrs:{size:"18px"}},[t._v("mdi-help-circle")])],1)],1)],1),t._v(" "),e("v-card",{staticClass:"mb-3 mx-auto rounded-lg",attrs:{width:"80%",flat:"",rounded:""}},[e("v-card-title",{staticClass:"pt-2 pb-0 d-flex"},[e("v-avatar",{attrs:{size:"45px"}},[e("img",{attrs:{src:a.avatar,alt:"John"}})]),t._v(" "),e("span",{staticClass:"d-flex flex-column justify-center ml-2"},[e("span",{staticClass:"text_small text_thick"},[t._v(t._s(a.thread_starter_name))]),t._v(" "),e("span",{staticClass:"text_small-- text_grey mt-n2"},[t._v(t._s(t.timeFormat(a.latest_comment_time)))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.showBottomDrawer(i,"HotPostRecently")}}},[e("v-icon",{attrs:{size:"30px"}},[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"mt-1 d-flex flex-column pb-0"},[0==a.filterLevel?e("div",[e("span",{staticClass:"text_small text_thick text_black"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"text_small--- line_three"},[t._v(t._s(a.content))]),t._v(" "),e("span",[e("v-chip",{staticClass:"ma-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[a.category]))]),t._v(" "),e("span",[t._v(t._s(a.category))])],1)],1)]):e("div",[e("span",{staticClass:"text-decoration-line-through text_small text_thick text_black"},[t._v("【已折叠】")]),t._v(" "),e("v-expansion-panels",{attrs:{flat:"",dense:""}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"d-flex justify-start",on:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"actions",fn:function(){return[e("v-icon",{staticClass:"mt-n2",attrs:{size:"30px"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),"无"!=a.tag?e("div",{style:a.tag.length>2?"width:35px":"width:0px"},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"black",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.tagToIcon[a.tag]))]),t._v(" "),e("span",[t._v(t._s(a.tag))])],1)],1):t._e(),t._v(" "),e("div",{staticStyle:{width:"60px"}},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[a.category]))]),t._v(" "),e("span",[t._v(t._s(a.category))])],1)],1)]),t._v(" "),e("v-expansion-panel-content",{staticClass:"mt-n3",staticStyle:{"border-radius":"10px",overflow:"hidden"},attrs:{color:"grey lighten-4"}},[e("div",[e("span",{staticClass:"text_small text_thick text_black"},[t._v("【题目】"+t._s(a.title))]),t._v(" "),e("span",{staticClass:"text_small--- line_three"},[t._v("【内容】"+t._s(a.content))])])])],1)],1)],1),t._v(" "),e("span",{staticClass:"d-flex align-center"},[e("v-btn",{attrs:{icon:"",small:"",color:"black"},on:{click:function(a){return a.stopPropagation(),t.likeOrDislike(i,1,"HotPostRecently")}}},[e("v-icon",{attrs:{size:"22px"}},[t._v("mdi-thumb-up-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.like_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-3",attrs:{icon:"",small:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-eye-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.visit_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-3",attrs:{icon:"",small:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-comment-processing-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.comment_num))])],1)])],1)],1):t._e()}),t._v(" "),e("div",{staticClass:"mt-14 mt-md-16"})],2),t._v(" "),e("v-tab-item",[e("div",{staticClass:"d-flex flex-column align-center item_container"},[e("v-icon",{staticClass:"filter"},[t._v("mdi-star-box-outline")])],1),t._v(" "),t._l(t.digestPosts,function(a,s){return 2!=a.filterLevel?e("div",{key:s,staticClass:"d-flex item_container"},[0==a.filterLevel?e("v-card",{staticClass:"mb-3 mx-auto rounded-lg",attrs:{width:"100%",flat:"",rounded:""},on:{click:function(s){t.$router.push({path:"/postDetail",query:{id:Number(a.id)}}),t.$store.change_scrollYLeave()}}},[e("v-card-title",{staticClass:"pt-2 pb-0 d-flex"},[e("v-avatar",{attrs:{size:"45px"}},[e("img",{attrs:{src:a.avatar,alt:"John"}})]),t._v(" "),e("span",{staticClass:"d-flex flex-column justify-center ml-2"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text_small text_thick"},[t._v("#"+t._s(a.thread_starter_name))]),t._v(" "),null!=a.vote?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("投票")])]):t._e(),t._v(" "),null!=a.digest?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("加精")])]):t._e()],1),t._v(" "),e("span",{staticClass:"text_small-- text_grey mt-n2"},[t._v(t._s(t.timeFormat(a.latest_comment_time)))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.showBottomDrawer(s,"digestPosts")}}},[e("v-icon",{attrs:{size:"30px"}},[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"mt-1 d-flex flex-column pb-0"},[e("span",{staticClass:"text_small text_thick text_black"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"text_small--- line_three"},[t._v(t._s(a.content))]),t._v(" "),e("span",[e("v-chip",{staticClass:"ma-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[a.category]))]),t._v(" "),e("span",[t._v(t._s(a.category))])],1)],1),t._v(" "),e("span",{staticClass:"d-flex align-center"},[e("v-btn",{attrs:{icon:"",small:""},on:{click:function(a){return a.stopPropagation(),t.likeOrDislike(s,1,"digestPosts")}}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-thumb-up-outline")])],1),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(a.like_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-5",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-eye-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.visit_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-6",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-comment-processing-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.comment_num))])],1)])],1):e("v-card",{staticClass:"mb-3 mx-auto rounded-lg",attrs:{width:"100%",flat:"",rounded:""},on:{click:function(s){t.$router.push({path:"/postDetail",query:a}),t.$store.change_scrollYLeave()}}},[e("v-card-title",{staticClass:"pt-2 pb-0 d-flex"},[e("v-avatar",{attrs:{size:"45px"}},[e("img",{attrs:{src:a.avatar,alt:"John"}})]),t._v(" "),e("span",{staticClass:"d-flex flex-column justify-center ml-2"},[e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text_small text_thick"},[t._v("#"+t._s(a.thread_starter_name))]),t._v(" "),null!=a.vote?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("投票")])]):t._e(),t._v(" "),null!=a.digest?e("v-chip",{staticClass:"mt-2 ml-2 px-2 d-flex align-center",attrs:{outlined:"","x-small":"",color:"primary"}},[e("span",{},[t._v("加精")])]):t._e()],1),t._v(" "),e("span",{staticClass:"text_small-- text_grey mt-n2"},[t._v(t._s(t.timeFormat(a.latest_comment_time)))])]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.showBottomDrawer(s,"digestPosts")}}},[e("v-icon",{attrs:{size:"30px"}},[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"pb-0"},[e("div",{staticClass:"d-flex flex-column"},[e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"text-decoration-line-through text_small text_thick black--text"},[t._v("【已折叠 】")])]),t._v(" "),e("div",[e("v-expansion-panels",{attrs:{flat:""}},[e("v-expansion-panel",[e("v-expansion-panel-header",{staticClass:"d-flex justify-start",on:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"actions",fn:function(){return[e("v-icon",{staticClass:"mt-n2",attrs:{size:"30px"}},[t._v("mdi-chevron-down")])]},proxy:!0}],null,!0)},[t._v(" "),"无"!=a.tag?e("div",{style:a.tag.length>2?"width:35px":"width:0px"},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"black",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.tagToIcon[a.tag]))]),t._v(" "),e("span",[t._v(t._s(a.tag))])],1)],1):t._e(),t._v(" "),e("div",{staticStyle:{width:"60px"}},[e("v-chip",{staticClass:"mt-n1 mb-1",attrs:{color:"primary",outlined:"",small:""}},[e("v-icon",{attrs:{left:"",size:"20px"}},[t._v(t._s(t.map.categoryToAvatar[a.category]))]),t._v(" "),e("span",[t._v(t._s(a.category))])],1)],1),t._v(" "),e("v-spacer")],1),t._v(" "),e("v-expansion-panel-content",{staticClass:"mt-n3",staticStyle:{"border-radius":"10px",overflow:"hidden"},attrs:{color:"grey lighten-4"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"text_thick black--text text_small line_one"},[t._v(t._s(a.title))]),t._v(" "),e("span",{staticClass:"text_small--- grey--text line_three"},[t._v(t._s(a.content))])])])],1)],1)],1)]),t._v(" "),e("span",{staticClass:"d-flex align-center mt-n1"},[e("v-btn",{attrs:{icon:"",small:""},on:{click:function(a){return a.stopPropagation(),t.likeOrDislike(s,1,"digestPosts")}}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-thumb-up-outline")])],1),t._v(" "),e("span",{staticClass:"ml-1"},[t._v(t._s(a.like_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-5",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-eye-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.visit_num))]),t._v(" "),e("v-avatar",{staticClass:"ml-6",attrs:{icon:"",size:"40px"}},[e("v-icon",{attrs:{size:"22px",color:"black"}},[t._v("mdi-comment-processing-outline")])],1),t._v(" "),e("span",[t._v(t._s(a.comment_num))])],1)])],1)],1):t._e()}),t._v(" "),e("div",{staticClass:"mt-14 mt-md-16"})],2)],1),t._v(" "),e("v-snackbar",{attrs:{bottom:"",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(a){t.$set(t.snackbar,"show",a)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.message))]),t._v(" "),e("v-navigation-drawer",{staticStyle:{height:"24%","z-index":"99"},attrs:{dark:"",bottom:"",fixed:"",touchless:""},model:{value:t.bottomDrawer.showBottomDrawer,callback:function(a){t.$set(t.bottomDrawer,"showBottomDrawer",a)},expression:"bottomDrawer.showBottomDrawer"}},[e("div",[e("v-btn",{attrs:{text:"",outlined:"",width:"100%",height:"8vh"},on:{click:function(a){return t.likeOrDislike(t.bottomDrawer.chooseIndex,-1,t.bottomDrawer.listName)}}},[e("v-icon",[t._v("mdi-alert-decagram-outline")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("举报")]),t._v(" "),e("span",{staticClass:"ml-1 text_xsmall grey--text"},[t._v("【举报数:"+t._s(t.bottomDrawer.dislike_num)+"】")])],1),t._v(" "),e("v-btn",{attrs:{text:"",outlined:"",width:"100%",height:"8vh"},on:{click:function(a){return t.shieldPost(t.bottomDrawer.chooseIndex,t.bottomDrawer.listName)}}},[e("v-icon",[t._v("mdi-close-box-multiple-outline")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("屏蔽")])],1),t._v(" "),e("v-btn",{attrs:{text:"",outlined:"",width:"100%",height:"8vh"},on:{click:function(a){return t.addCollect(t.bottomDrawer.chooseIndex,t.bottomDrawer.listName)}}},[e("v-icon",[t._v("mdi-bookmark-multiple-outline")]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v("收藏")])],1)],1)]),t._v(" "),e("v-dialog",{attrs:{scrollable:"",overlay:!1,"max-width":"500px",transition:"dialog-transition",dark:""},model:{value:t.hotExplainDialog,callback:function(a){t.hotExplainDialog=a},expression:"hotExplainDialog"}},[e("v-card",{staticStyle:{"background-color":"#363636"}},[e("v-card-title",[e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-fire")]),t._v(" "),e("span",{staticClass:"ml-1"},[t._v("热度解释")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"mt-2"},[e("div",{domProps:{innerHTML:t._s(t.hotExplainContent)}})])],1)],1)],1)},staticRenderFns:[]};var c=s("C7Lr")(l,r,!1,function(t){s("WYQs")},null,null);a.default=c.exports},fHNP:function(t,a,s){t.exports=s.p+"static/img/top_4.961fe2d.png"},lC8E:function(t,a,s){t.exports=s.p+"static/img/top_1.bc61735.png"},y1fV:function(t,a,s){t.exports=s.p+"static/img/top_3.16fbab7.png"}});
//# sourceMappingURL=1.ecb3f083921b4dc184c7.js.map