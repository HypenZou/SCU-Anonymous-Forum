webpackJsonp([4],{"4YfN":function(t,e,n){"use strict";e.__esModule=!0;var a,i=n("aA9S"),o=(a=i)&&a.__esModule?a:{default:a};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}},G7dL:function(t,e,n){n("UFnr"),t.exports=n("DH3n").Object.assign},OnAv:function(t,e,n){"use strict";var a=n("5cPm"),i=n("Lzmh"),o=n("j4Mf"),s=n("QUP2"),r=n("PGvq"),c=n("W0Hg"),l=Object.assign;t.exports=!l||n("cqFu")(function(){var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=a})?function(t,e){for(var n=r(t),l=arguments.length,v=1,m=o.f,u=s.f;l>v;)for(var g,d=c(arguments[v++]),_=m?i(d).concat(m(d)):i(d),f=_.length,p=0;f>p;)g=_[p++],a&&!u.call(d,g)||(n[g]=d[g]);return n}:l},UFnr:function(t,e,n){var a=n("uSC2");a(a.S+a.F,"Object",{assign:n("OnAv")})},aA9S:function(t,e,n){t.exports={default:n("G7dL"),__esModule:!0}},gvgn:function(t,e){},jdDP:function(t,e,n){t.exports=n.p+"static/img/火锅底料2.aeccf58.png"},quRh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("4YfN"),i=n.n(a),o=n("wtEF"),s=(o.a.state.tabBar,{name:"layout",data:function(){return i()({navigationDialog:!1},o.a.state,{dialog:!1,newMessage:!1,newSystemMessage:!1,announcementDialog:{show:!1,content:""},registerWithEmail:{show:!1,email:"@stu.scu.edu.cn",filter:function(t){return!!/^([A-Za-z0-9_\-\.\u4e00-\u9fa5])+@stu.scu.edu.cn/.test(t)||"邮箱不合法"},code:"",oneMinuteInterval:!1,cnt:20},announcementId:localStorage.getItem("announcementId")})},created:function(){var t=this;console.log("新建组件",o.a.state.tabBar),this.tabBar=o.a.state.tabBar;var e=this;setTimeout(function(){t.$request("get","/forum/getAnnouncement",{},{}).then(function(t){"number"!=typeof t.data.id||isNaN(t.data.id)||localStorage.getItem("announcementId")&&!(t.data.id>localStorage.getItem("announcementId"))||(e.announcementDialog.show=!0,e.announcementDialog.content=t.data.content,e.announcementId=t.data.id)})},1e3)},mounted:function(){},methods:{change_tab_bar:function(t){if(2!=t){var e=this;o.a.change_tab_bar(t),this.$nextTick(function(){console.log("changed"),e.tabBar=o.a.state.tabBar}),this.$store.change_scrollYLeave(),this.$router.replace("/main/"+["index","hot","evaluation"][t])}else this.dialog=!0},getCommentsNum:function(){var t=this;t.$request("get","/user/getCommentsNum",{timeToken:(new Date).getTime()},{}).then(function(e){"number"!=typeof e.data||isNaN(e.data)?t.newMessage=!1:(sessionStorage.setItem("commentNumTemp",e.data),localStorage.getItem("commentNum")&&localStorage.getItem("commentNum")<e.data?t.newMessage=!0:!localStorage.getItem("commentNum")&&e.data>0?t.newMessage=!0:t.newMessage=!1)}).catch(function(e){console.log(e),t.newMessage=!1})},knowAnnouncement:function(){this.announcementDialog.show=!1,localStorage.setItem("announcementId",this.announcementId)},getSystemMessageNum:function(){var t=this;t.$request("get","/user/getSystemMessageNum",{timeToken:(new Date).getTime()}).then(function(e){"number"!=typeof e.data||isNaN(e.data)?t.newSystemMessage=!1:(sessionStorage.setItem("SystemMessageNumTemp",e.data),localStorage.getItem("SystemMessageNum")&&localStorage.getItem("SystemMessageNum")<e.data?t.newSystemMessage=!0:!localStorage.getItem("SystemMessageNum")&&e.data>0?t.newSystemMessage=!0:t.newSystemMessage=!1)}).catch(function(e){t.newSystemMessage=!1})},toPersonalCenter:function(t){this.$store.change_scrollYLeave(),this.$router.push("/"+t)},toHistoryAnnouncement:function(){window.open("http://scuhuoguodiliao.com/#/announcement","_system",{})}},activated:function(){console.log("显示了"),this.tabBar=o.a.state.tabBar},watch:{dialog:function(t){this.$store.change_dialog(t,"dialog")},"announcementDialog.show":function(t){this.$store.change_dialog(t,"announcementDialog.show")},"that.$store.state.drawer":function(t){"dialog"==this.$store.state.dialogName?this.dialog=t:"announcementDialog.show"==this.$store.state.dialogName&&(this.announcementDialog.show=t)}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{staticClass:"top",attrs:{fixed:"",elevation:0==t.tabBar?2:0,color:"background",app:""}},[a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){t.navigationDialog=!t.navigationDialog,t.getCommentsNum(),t.getSystemMessageNum()}}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-account-circle")])],1),t._v(" "),a("v-img",{attrs:{contain:"","max-width":"72px",height:"36px",src:n("jdDP")}}),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-app-bar",{class:t.$store.state.isUp?"animate__animated animate__slideOutDown":"animate__animated animate__slideInUp",staticStyle:{"--animate-duration":"200ms"},attrs:{fixed:"",bottom:"",elevation:"6",color:"background"}},[a("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:function(e){return t.change_tab_bar(0)}}},[a("v-icon",{attrs:{size:0==t.tabBar?"33px":"28px",color:0==t.tabBar?"primary":"grey"}},[t._v("mdi-earth")])],1),t._v(" "),a("v-btn",{staticClass:"ml-2",attrs:{icon:""},on:{click:function(e){return t.change_tab_bar(1)}}},[a("v-icon",{attrs:{size:1==t.tabBar?"32px":"28px",color:1==t.tabBar?"primary":"grey"}},[t._v("mdi-firebase")])],1)],1),t._v(" "),a("keep-alive",[t.$route.meta.keepAlive?a("router-view"):t._e()],1),t._v(" "),t.$route.meta.keepAlive?t._e():a("router-view"),t._v(" "),a("v-navigation-drawer",{staticStyle:{overflow:"visible",position:"fixed"},attrs:{absolute:"",temporary:"",dark:""},model:{value:t.navigationDialog,callback:function(e){t.navigationDialog=e},expression:"navigationDialog"}},[a("v-btn",{staticClass:"navigation_close",staticStyle:{position:"absolute"},attrs:{color:"primary",fab:"",absolute:""},on:{click:function(e){t.navigationDialog=!t.navigationDialog}}},[a("v-icon",{attrs:{size:"32px"}},[t._v("mdi-close-thick")])],1),t._v(" "),a("v-list-item",[a("v-list-item-avatar",[a("v-avatar",{staticClass:"ml-n2",attrs:{size:"32px",color:"white"}},[a("v-icon",{attrs:{color:"grey darken-3",size:"24px"}},[t._v("mdi-account")])],1)],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("火锅底料")])],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list",[a("v-list-item",{attrs:{link:"","single-line":""},on:{click:function(e){return t.toPersonalCenter("systemMessage")}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-cog-transfer")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",{staticStyle:{overflow:"visible"}},[t.newSystemMessage?a("v-badge",{staticClass:"mt-n3",attrs:{color:"primary",dot:""}},[t._v("系统消息")]):a("span",[t._v("系统消息")])],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-item",{attrs:{link:"","single-line":""},on:{click:function(e){return t.toPersonalCenter("replyMe")}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-message-processing-outline")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",{staticStyle:{overflow:"visible"}},[t.newMessage?a("v-badge",{staticClass:"mt-n3",attrs:{color:"primary",dot:""}},[t._v("回复我的")]):a("span",[t._v("回复我的")])],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-item",{attrs:{link:"","single-line":""},on:{click:function(e){return t.toPersonalCenter("historyPosts")}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-paperclip")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("历史发帖")])],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-item",{attrs:{link:"","single-line":""},on:{click:function(e){return t.toPersonalCenter("historyComments")}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-send")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("历史评论")])],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-item",{attrs:{link:"","single-line":""},on:{click:function(e){return t.toPersonalCenter("myCollect")}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-bookmark-multiple-outline")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("我的收藏")])],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-item",{attrs:{link:"","single-line":""},on:{click:function(e){return t.toPersonalCenter("myConfig")}}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-wrench")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("过滤设置")])],1)],1),t._v(" "),a("v-divider")],1)],1),t._v(" "),a("v-dialog",{attrs:{dark:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticStyle:{"background-color":"#363636"},attrs:{height:"180px"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("span",{staticStyle:{"font-size":"64rpx"}},[t._v("评教系统暂未开放")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),a("v-card-text",[a("v-spacer"),t._v(" "),a("v-icon",{staticClass:"float-right ml-n4",attrs:{color:"primary",size:"80"}},[t._v("mdi-anchor")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:t.announcementDialog.show,callback:function(e){t.$set(t.announcementDialog,"show",e)},expression:"announcementDialog.show"}},[a("v-card",{staticStyle:{"background-color":"#363636"},attrs:{dark:""}},[a("v-card-title",[a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-bulletin-board")]),t._v(" "),a("span",{staticClass:"ml-1"},[t._v("社区公告")])],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-text",{staticClass:"mt-2"},[a("div",{domProps:{innerHTML:t._s(t.announcementDialog.content)}})]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:t.toHistoryAnnouncement}},[a("span",[t._v("历史公告")])]),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:t.knowAnnouncement}},[a("span",[t._v("我已知晓")])])],1)],1)],1)],1)},staticRenderFns:[]};var c=n("C7Lr")(s,r,!1,function(t){n("gvgn")},null,null);e.default=c.exports}});
//# sourceMappingURL=4.721a29b82d7c5242389f.js.map