{"version":3,"sources":["webpack:///src/view/personalCenter/historyComments.vue","webpack:///./src/view/personalCenter/historyComments.vue?5ef1","webpack:///./src/view/personalCenter/historyComments.vue"],"names":["historyComments","name","components","MescrollVue","_mescroll_js_1_4_2_mescroll_js_mescroll","data","mescrollDown","callback","this","refreshData","mescrollUp","getMoreData","noMoreSize","empty","warpId","icon","tip","btntext","btnClick","supportTap","methods","timeFormat","latest_comment_time","t","Math","floor","Date","getTime","d","h","m","s","res","toJSON","substr","replace","mescroll","that","$request","then","console","log","endSuccess","catch","e","endErr","page","time","length","created_time","timeToken","_that$historyComments","num","push","apply","toConsumableArray_default","rightSlide","$router","go","directives","touch","personalCenter_historyComments","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","app","color","fab","text","small","on","click","$event","back","large","_v","rawName","value","expression","arg","staticStyle","background-color","ref","down","up","id","_l","item","i","key","width","flat","rounded","path","query","postId","size","src","avatar","alt","_s","content","_e","title","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.9f8e0c08bd9a414caf13.js","sourcesContent":["<template>\r\n  <v-container class=\"d-flex flex-column px-0\">\r\n    <v-app-bar fixed class=\"top\" app  color=\"white\">\r\n      <v-btn fab text small @click=\"$router.back(-1)\" class=\"mt-2\">\r\n        <v-icon large>mdi-arrow-left</v-icon>\r\n      </v-btn>\r\n      <span class=\"text_middle mt-2\">历史评论</span>\r\n    </v-app-bar>\r\n    <div\r\n      class=\"mescroll_container_historyComments\"\r\n      style=\"background-color: #f5f5f5;\"\r\n      v-touch:swiperight=\"rightSlide\"\r\n    >\r\n      <mescroll-vue ref=\"mescroll\" :down=\"mescrollDown\" :up=\"mescrollUp\">\r\n        <div id=\"noMoreDataWrap\"></div>\r\n        <v-card\r\n          color=\"white\"\r\n          width=\"100%\"\r\n          class=\"mt-2\"\r\n          flat\r\n          rounded\r\n          v-for=\"(item,i) in historyComments\"\r\n          :key=\"i\"\r\n          @click=\"$router.push({\r\n          path:'/postDetail',\r\n          query:{id:item.postId}\r\n        });\"\r\n        >\r\n          <v-card-text class=\"d-flex flex-column py-2\">\r\n            <div class=\"d-flex\">\r\n              <v-avatar size=\"40\" class=\"ml-3 mb-1\">\r\n                <img :src=\"item.avatar\" alt=\"头像\" />\r\n              </v-avatar>\r\n              <div class=\"d-flex flex-column\">\r\n                <span class=\"text_small-- text_thick ml-2\">#{{item.name}}</span>\r\n                <span class=\"text_small--- ml-2 grey--text mt-n1\">{{timeFormat(item.created_time)}}</span>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <span class=\"text_thick black--text\">【我的回复】:</span>\r\n              <span class=\"black--text\">{{item.content}}</span>\r\n              <span v-if=\"item.image\">\r\n                <span class=\"ml-2\">[图片]</span>\r\n              </span>\r\n            </div>\r\n            <span class=\"text_small-- black--text grey_background_historyComments pa-1\">\r\n              <span class=\"text_thick\">【帖子】</span>\r\n              {{item.title}}\r\n            </span>\r\n          </v-card-text>\r\n        </v-card>\r\n      </mescroll-vue>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport MescrollVue from \"mescroll.js/mescroll.vue\";\r\nimport touch from '../../utils/touch'\r\nexport default {\r\n  name: \"historyComments\",\r\n  components: {\r\n    MescrollVue, // 注册mescroll组件\r\n  },\r\n  data() {\r\n    return {\r\n      mescrollDown: {\r\n        callback: this.refreshData,\r\n      },\r\n      mescrollUp: {\r\n        callback: this.getMoreData,\r\n        noMoreSize: 3,\r\n        empty: {\r\n          warpId: 'noMoreDataWrap',\r\n          icon: null,\r\n          tip: \"暂无历史评论\",\r\n          btntext: \"\",\r\n          btnClick: null,\r\n          supportTap: false\r\n        }\r\n      },\r\n      historyComments: []\r\n    };\r\n  },\r\n  methods: {\r\n    //计算时间差\r\n    timeFormat(latest_comment_time) {\r\n      //一共这么多秒前\r\n      let t = Math.floor(\r\n        (new Date().getTime() - new Date(latest_comment_time).getTime()) / 1000\r\n      );\r\n      const d = Math.floor(t / 3600 / 24);\r\n      const h = Math.floor(t / 3600) % 24;\r\n      const m = Math.floor(t / 60) % 60;\r\n      const s = Math.floor(t % 60);\r\n      let res = ''\r\n      if (s > 0 && m == 0 && h == 0 && d == 0) {\r\n        res = s + \"秒前\";\r\n      } else if (m > 0 && h == 0 && d == 0) {\r\n        res = m + \"分钟前\";\r\n      } else if (h > 0 && d == 0) {\r\n        res = h + \"小时前\";\r\n      } else {\r\n        let date = new Date(\r\n          new Date(latest_comment_time).getTime() + 8 * 3600 * 1000\r\n        );\r\n        return date.toJSON().substr(0, 16).replace('T', ' ');\r\n      }\r\n      return res;\r\n    },\r\n    refreshData(mescroll) {\r\n      let that = this\r\n      that.$request('get', '/user/getHistoryComments', {})\r\n        .then(res => {\r\n          console.log(res)\r\n          that.historyComments = res.data\r\n          mescroll.endSuccess()\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n          mescroll.endErr()\r\n        })\r\n    },\r\n    getMoreData(page, mescroll) {\r\n      let that = this\r\n      let time = that.historyComments.length > 0 ? new Date(that.historyComments[that.historyComments.length - 1].created_time).getTime()\r\n        : new Date().getTime()\r\n      that.$request('get', '/user/getHistoryComments', {\r\n        timeToken: time\r\n      })\r\n        .then(res => {\r\n          if (page.num === 1) that.historyComments = []\r\n          that.historyComments.push(...res.data)\r\n          mescroll.endSuccess(res.data.length)\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n          mescroll.endErr()\r\n        })\r\n    },\r\n    rightSlide(){\r\n      this.$router.go(-1)\r\n    }\r\n  },\r\n  directives: {\r\n    touch\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.mescroll_container_historyComments {\r\n  position: fixed;\r\n  top: 60px;\r\n  bottom: 0;\r\n  height: auto; /*如设置bottom:50px,则需height:auto才能生效*/\r\n  width: 100%;\r\n  background-color: #f5f5f5;\r\n}\r\n.grey_background_historyComments {\r\n  background-color: #f5f5f5;\r\n  border-radius: 10px;\r\n  width: 90%;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/personalCenter/historyComments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"d-flex flex-column px-0\"},[_c('v-app-bar',{staticClass:\"top\",attrs:{\"fixed\":\"\",\"app\":\"\",\"color\":\"white\"}},[_c('v-btn',{staticClass:\"mt-2\",attrs:{\"fab\":\"\",\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.$router.back(-1)}}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-arrow-left\")])],1),_vm._v(\" \"),_c('span',{staticClass:\"text_middle mt-2\"},[_vm._v(\"历史评论\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"touch\",rawName:\"v-touch:swiperight\",value:(_vm.rightSlide),expression:\"rightSlide\",arg:\"swiperight\"}],staticClass:\"mescroll_container_historyComments\",staticStyle:{\"background-color\":\"#f5f5f5\"}},[_c('mescroll-vue',{ref:\"mescroll\",attrs:{\"down\":_vm.mescrollDown,\"up\":_vm.mescrollUp}},[_c('div',{attrs:{\"id\":\"noMoreDataWrap\"}}),_vm._v(\" \"),_vm._l((_vm.historyComments),function(item,i){return _c('v-card',{key:i,staticClass:\"mt-2\",attrs:{\"color\":\"white\",\"width\":\"100%\",\"flat\":\"\",\"rounded\":\"\"},on:{\"click\":function($event){return _vm.$router.push({\n        path:'/postDetail',\n        query:{id:item.postId}\n      });}}},[_c('v-card-text',{staticClass:\"d-flex flex-column py-2\"},[_c('div',{staticClass:\"d-flex\"},[_c('v-avatar',{staticClass:\"ml-3 mb-1\",attrs:{\"size\":\"40\"}},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"头像\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-column\"},[_c('span',{staticClass:\"text_small-- text_thick ml-2\"},[_vm._v(\"#\"+_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticClass:\"text_small--- ml-2 grey--text mt-n1\"},[_vm._v(_vm._s(_vm.timeFormat(item.created_time)))])])],1),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"text_thick black--text\"},[_vm._v(\"【我的回复】:\")]),_vm._v(\" \"),_c('span',{staticClass:\"black--text\"},[_vm._v(_vm._s(item.content))]),_vm._v(\" \"),(item.image)?_c('span',[_c('span',{staticClass:\"ml-2\"},[_vm._v(\"[图片]\")])]):_vm._e()]),_vm._v(\" \"),_c('span',{staticClass:\"text_small-- black--text grey_background_historyComments pa-1\"},[_c('span',{staticClass:\"text_thick\"},[_vm._v(\"【帖子】\")]),_vm._v(\"\\n            \"+_vm._s(item.title)+\"\\n          \")])])],1)})],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-eb5426b4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/view/personalCenter/historyComments.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eb5426b4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./historyComments.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./historyComments.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./historyComments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eb5426b4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./historyComments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/personalCenter/historyComments.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}